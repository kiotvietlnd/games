<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE CHOSEN ONE - KiotViet Master Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #00A9E0; --secondary: #005595; --accent: #00FFCC; --bg: #030712;
            --panel: rgba(255, 255, 255, 0.05); --border: rgba(0, 169, 224, 0.3);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif; background: var(--bg);
            background-image: radial-gradient(circle at 50% -20%, rgba(0, 169, 224, 0.2) 0%, transparent 50%);
            color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }
        header {
            padding: 15px 40px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0, 0, 0, 0.8); border-bottom: 2px solid var(--secondary);
        }
        .logo-text { font-size: 28px; font-weight: 900; letter-spacing: 5px; text-shadow: 0 0 15px var(--primary); text-transform: uppercase; }
        .mode-selector { display: flex; background: rgba(255, 255, 255, 0.05); padding: 5px; border-radius: 12px; border: 1px solid var(--border); }
        .mode-btn {
            border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;
            font-weight: 800; font-size: 11px; color: #666; background: transparent; transition: 0.3s;
        }
        .mode-btn.active { background: var(--primary); color: white; box-shadow: 0 0 20px rgba(0, 169, 224, 0.5); }
        .main-grid { display: grid; grid-template-columns: 320px 1fr 500px; gap: 20px; padding: 20px; flex: 1; }
        .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 20px; backdrop-filter: blur(15px); padding: 20px; display: flex; flex-direction: column; }
        textarea { flex: 1; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border); border-radius: 12px; color: #00FFCC; padding: 15px; font-size: 14px; resize: none; outline: none; }
        .game-zone { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .lucky-label { font-size: 18px; font-weight: 800; color: var(--accent); letter-spacing: 2px; margin-bottom: 10px; opacity: 0; transition: 0.3s; }
        .lucky-label.show { opacity: 1; }

        .winner-name { font-size: 54px; font-weight: 900; text-shadow: 0 0 30px var(--primary); text-align: center; min-height: 70px; margin-bottom: 20px; color: #fff; }
        
        .spin-btn {
            width: 170px; height: 170px; border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border: 8px solid rgba(255,255,255,0.1); color: white; font-size: 20px; font-weight: 900;
            cursor: pointer; box-shadow: 0 0 40px rgba(0, 85, 149, 0.6); transition: 0.3s;
        }
        .spin-btn:hover:not(:disabled) { transform: scale(1.05); filter: brightness(1.2); }
        .scenario-box { background: rgba(0, 0, 0, 0.4); border: 1px solid var(--border); padding: 20px; border-radius: 18px; flex: 1; overflow-y: auto; font-size: 13px; line-height: 1.6; }
        .tag { background: rgba(0, 255, 204, 0.1); color: var(--accent); border: 1px solid var(--accent); padding: 3px 10px; border-radius: 20px; font-size: 10px; font-weight: 800; margin-bottom: 8px; display: inline-block; }
        .sc-title { font-size: 16px; font-weight: 800; color: #fff; margin-bottom: 5px; }
        .sc-context { color: var(--primary); font-style: italic; margin-bottom: 12px; font-size: 12px; border-left: 2px solid; padding-left: 10px; }
        .sc-step { margin-bottom: 10px; color: #d1d1d6; }
        .sc-step b { color: var(--accent); }
        .history-item { font-size: 11px; color: #52525b; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; }
        
        .panel-header { font-size: 12px; font-weight: 900; color: var(--accent); margin-bottom: 15px; display: flex; align-items: center; gap: 8px; text-transform: uppercase; letter-spacing: 1px; }
    </style>
</head>
<body>

    <header>
        <div class="logo-text">THE CHOSEN ONE</div>
        <div class="mode-selector">
            <button class="mode-btn active" id="btnMode1" onclick="setMode(1)">BU·ªîI 1: C∆† B·∫¢N</button>
            <button class="mode-btn" id="btnMode2" onclick="setMode(2)">BU·ªîI 2: H·ªéI ƒê√ÅP</button>
        </div>
    </header>

    <div class="main-grid">
        <div class="panel">
            <h2 class="panel-header">‚ö° H√ÄNG CH·ªú CHI·∫æN BINH</h2>
            <textarea id="nameList" placeholder="D√°n danh s√°ch h·ªçc vi√™n..."></textarea>
            <div id="countDisplay" style="text-align: center; font-size: 11px; margin-top: 10px; color: var(--secondary); font-weight: 800;">0 ƒê·ªêI TH·ª¶ ƒêANG CH·ªú</div>
        </div>

        <div class="game-zone">
            <div id="luckyLabel" class="lucky-label">G·ªåI T√äN CHI·∫æN BINH...</div>
            <div id="winnerName" class="winner-name">---</div>
            <button class="spin-btn" id="spinBtn" onclick="startSpin()">TRI·ªÜU H·ªíI</button>
            <div id="turnLabel" style="margin-top: 20px; font-weight: bold; color: var(--secondary); letter-spacing: 1px;">L∆Ø·ª¢T TH·ª®: 0</div>
        </div>

        <div class="panel">
            <h2 class="panel-header">üî• TH·ª¨ TH√ÅCH SINH T·ª¨</h2>
            <div class="scenario-box" id="scenarioBox">
                <div style="text-align: center; opacity: 0.3; margin-top: 100px;">ƒêang ƒë·ª£i ch·ªß nh√¢n m·ªõi...</div>
            </div>
            <div id="historyList" style="margin-top: 15px; max-height: 120px; overflow-y: auto;"></div>
            <button onclick="resetGame()" style="margin-top: 10px; background: none; border: 1px solid #333; color: #555; padding: 5px; font-size: 10px; cursor: pointer; border-radius: 5px;">H·ªíI SINH H·ªÜ TH·ªêNG</button>
        </div>
    </div>

    <audio id="soundTick"><source src="https://www.soundjay.com/buttons/sounds/button-28.mp3" type="audio/mpeg"></audio>
    <audio id="soundWin"><source src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3" type="audio/mpeg"></audio>

    <script>
        const BUOI1_MASTER = [
            {
                tag: "LU·ªíNG C∆† B·∫¢N 01", title: "C·ª≠a h√†ng N∆∞·ªõc gi·∫£i kh√°t 'Gi·∫£i Kh√°t 247'",
                context: "C·ª≠a h√†ng c·∫ßn qu·∫£n l√Ω Bia theo Lon v√† Th√πng, theo d√µi c√¥ng n·ª£ NCC v√† b√°o c√°o doanh thu.",
                steps: [
                    "<b>1. H√†ng h√≥a:</b> Th√™m 'Bia Tiger'. Lon (c∆° b·∫£n) & Th√πng = 24 Lon (quy ƒë·ªïi). Nh√≥m h√†ng, Gi√° b√°n/v·ªën, T·ªìn kho.",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 50 Th√πng t·ª´ 'NCC Thi√™n Nga'. Th√™m NCC m·ªõi, l∆∞u c√¥ng n·ª£ 1 ph·∫ßn.",
                    "<b>3. B√°n h√†ng:</b> B√°n cho kh√°ch 'Anh Tu·∫•n' 1 Th√πng + 6 Lon. Thanh to√°n: Ti·ªÅn m·∫∑t + Chuy·ªÉn kho·∫£n.",
                    "<b>4. Tr·∫£ h√†ng:</b> Anh Tu·∫•n tr·∫£ l·∫°i 2 Lon l·∫ª. T√¨m <b>h√≥a ƒë∆°n g·ªëc</b> ƒë·ªÉ x·ª≠ l√Ω.",
                    "<b>5. C√¥ng n·ª£:</b> Chi tr·∫£ n·ª£ cho NCC v√† Thu n·ª£ t·ª´ kh√°ch Tu·∫•n t·∫°i m√†n h√¨nh Qu·∫£n l√Ω.",
                    "<b>6. B√°o c√°o:</b> H∆∞·ªõng d·∫´n xem: Doanh thu (T·ªïng quan), Xu·∫•t-Nh·∫≠p-T·ªìn, L·ª£i nhu·∫≠n thu·∫ßn, B√°o c√°o cu·ªëi ng√†y ngang."
                ]
            },
            {
                tag: "LU·ªíNG C∆† B·∫¢N 02", title: "Shop V√°y Thi·∫øt K·∫ø 'Lily Design'",
                context: "Shop c·∫ßn qu·∫£n l√Ω v√°y theo thu·ªôc t√≠nh M√†u/Size, x·ª≠ l√Ω n·ª£ x∆∞·ªüng may v√† b√°o c√°o doanh thu.",
                steps: [
                    "<b>1. H√†ng h√≥a:</b> Th√™m 'V√°y hoa nh√≠'. Chi·∫øc (c∆° b·∫£n). Thu·ªôc t√≠nh (M√†u s·∫Øc/Size), Gi√° b√°n/v·ªën, T·ªìn kho.",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 100 chi·∫øc t·ª´ 'X∆∞·ªüng may Thanh'. Th√™m NCC m·ªõi, n·ª£ 100%.",
                    "<b>3. B√°n h√†ng:</b> B√°n cho kh√°ch 'Ch·ªã Lan' nhi·ªÅu Size. Thanh to√°n: Ti·ªÅn m·∫∑t + Chuy·ªÉn kho·∫£n.",
                    "<b>4. Tr·∫£ h√†ng:</b> Ch·ªã Lan tr·∫£ l·∫°i 1 chi·∫øc. T√¨m <b>h√≥a ƒë∆°n g·ªëc</b> ƒë·ªÉ x·ª≠ l√Ω.",
                    "<b>5. C√¥ng n·ª£:</b> Tr·∫£ n·ª£ cho X∆∞·ªüng may v√† Thu n·ª£ t·ª´ Ch·ªã Lan t·∫°i m√†n h√¨nh ƒê·ªëi t√°c.",
                    "<b>6. B√°o c√°o:</b> H∆∞·ªõng d·∫´n xem: Doanh thu th·ªùi gian, T·ªìn kho chi ti·∫øt, L·ª£i nhu·∫≠n thu·∫ßn."
                ]
            }
        ];

        const BUOI2_MASTER = [
            { 
                tag: "CASE 1: QU·∫¢N TR·ªä", title: "C·ª≠a h√†ng M·∫π & B√© 'B√© Ngoan'",
                context: "V·∫•n ƒë·ªÅ: Thu√™ nh√¢n vi√™n Lan nh∆∞ng s·ª£ l·ªô doanh thu v√† mu·ªën ƒë·∫©y m·∫°nh doanh s·ªë b√°n s·ªâ.",
                steps: [
                    "<b>1. Nh√¢n vi√™n:</b> T·∫°o t√†i kho·∫£n cho nh√¢n vi√™n 'Lan'. <b>Kh√≥a quy·ªÅn</b> xem b√°o c√°o.",
                    "<b>2. D·ªãch v·ª•:</b> Th√™m h√†ng h√≥a d·ªãch v·ª• 'G√≥i qu√† sinh nh·∫≠t'.",
                    "<b>3. B·∫£ng gi√°:</b> T·∫°o 1 <b>B·∫£ng gi√° s·ªâ</b> d·ª±a tr√™n b·∫£ng gi√° chung (Gi·∫£m 10%).",
                    "<b>4. Nh·∫≠p h√†ng:</b> ƒêang nh·∫≠p h√†ng h√£y <b>Th√™m m·ªõi nhanh</b> s·∫£n ph·∫©m m·ªõi ch∆∞a c√≥ danh m·ª•c."
                ]
            },
            { 
                tag: "CASE 2: NH·∫¨P H√ÄNG", title: "Si√™u th·ªã mini 'Ti·ªán L·ª£i'",
                context: "V·∫•n ƒë·ªÅ: Gi√° th·ªã tr∆∞·ªùng bi·∫øn ƒë·ªông, c·∫ßn nh·∫≠p h√†ng ƒëa gi√° v√† ki·ªÉm so√°t gi√° v·ªën trung b√¨nh.",
                steps: [
                    "<b>1. Nh·∫≠p h√†ng:</b> Nh·∫≠p SP 'M√¨ H·∫£o H·∫£o' v·ªõi <b>2 m·ª©c gi√° kh√°c nhau</b> qua 2 l·∫ßn nh·∫≠p.",
                    "<b>2. ƒê·ªïi gi√°:</b> Thay ƒë·ªïi gi√° b√°n tr·ª±c ti·∫øp ngay tr√™n phi·∫øu nh·∫≠p h√†ng.",
                    "<b>3. Gi√° v·ªën:</b> Gi·∫£i th√≠ch c∆° ch·∫ø t√≠nh <b>Gi√° v·ªën trung b√¨nh</b> c·ªßa KiotViet.",
                    "<b>4. Tra c·ª©u:</b> T·∫°i m√†n b√°n h√†ng, l·ªçc SP nhanh theo <b>Nh√≥m h√†ng</b> v√† <b>Thu·ªôc t√≠nh</b>."
                ]
            },
            { 
                tag: "CASE 3: GIAO D·ªäCH", title: "C·ª≠a h√†ng ƒê·ªì gia d·ª•ng 'HomePlus'",
                context: "V·∫•n ƒë·ªÅ: Gi·ªù cao ƒëi·ªÉm ƒë√¥ng kh√°ch, c·∫ßn thu n·ª£ v√† tr·∫£ h√†ng nhanh kh√¥ng c·∫ßn h√≥a ƒë∆°n.",
                steps: [
                    "<b>1. B√°n h√†ng:</b> Kh√°ch mua h√†ng l·∫°, h√£y <b>th√™m m·ªõi nhanh</b> ngay tr√™n m√†n b√°n h√†ng.",
                    "<b>2. C√¥ng n·ª£:</b> Kh√°ch tr·∫£ n·ª£ c≈©, <b>Thu n·ª£</b> tr·ª±c ti·∫øp t·∫°i m√†n h√¨nh b√°n h√†ng.",
                    "<b>3. Tr·∫£ h√†ng:</b> <b>Tr·∫£ h√†ng nhanh</b> kh√¥ng c·∫ßn h√≥a ƒë∆°n g·ªëc t·∫°i m√†n h√¨nh b√°n h√†ng.",
                    "<b>4. C·∫•u h√¨nh:</b> Gi·ªõi h·∫°n th·ªùi gian cho ph√©p kh√°ch tr·∫£ h√†ng trong 3 ng√†y."
                ]
            },
            { 
                tag: "CASE 4: V·∫¨N H√ÄNH", title: "Shop M·ªπ ph·∫©m 'Glow Up'",
                context: "V·∫•n ƒë·ªÅ: Mu·ªën n√¢ng h·∫°ng kh√°ch VIP t·ª± ƒë·ªông v√† ki·ªÉm so√°t h√†ng h·ªèng theo nh√≥m h√†ng.",
                steps: [
                    "<b>1. VIP:</b> T·∫°o nh√≥m 'Kh√°ch VIP' (Gi·∫£m 10%) khi doanh thu ƒë·∫°t tr√™n 5 tri·ªáu.",
                    "<b>2. Ki·ªÉm kho 1:</b> T·∫°o phi·∫øu ki·ªÉm kho cho <b>1 s·∫£n ph·∫©m</b> c·ª• th·ªÉ.",
                    "<b>3. Ki·ªÉm kho 2:</b> T·∫°o phi·∫øu ki·ªÉm kho cho to√†n b·ªô m·ªôt <b>Nh√≥m h√†ng</b>.",
                    "<b>4. S·ªï qu·ªπ:</b> Chi ti·ªÅn ƒëi·ªán v√† Th√™m 1 <b>T√†i kho·∫£n ng√¢n h√†ng</b> m·ªõi c·ªßa shop."
                ]
            },
            { 
                tag: "CASE 5: DEMO", title: "Th·ª≠ th√°ch: Master KiotViet (1)",
                context: "Th·ªÉ hi·ªán b·∫£n lƒ©nh: Ho√†n thi·ªán quy tr√¨nh kinh doanh t·ª´ A-Z.",
                steps: ["<b>Y√™u c·∫ßu:</b> Demo m∆∞·ª£t 6 b∆∞·ªõc: Thi·∫øt l·∫≠p -> Nh·∫≠p h√†ng -> B√°n h√†ng -> Tr·∫£ h√†ng -> C√¥ng n·ª£ -> Xem B√°o c√°o T·ªïng quan & T√†i ch√≠nh."]
            },
            { 
                tag: "CASE 6: DEMO", title: "Th·ª≠ th√°ch: Master KiotViet (2)",
                context: "Th·ªÉ hi·ªán b·∫£n lƒ©nh: Show k·ªπ nƒÉng qu·∫£n l√Ω kho v√† b√°o c√°o ngang chuy√™n nghi·ªáp.",
                steps: ["<b>Y√™u c·∫ßu:</b> Demo m∆∞·ª£t 6 b∆∞·ªõc: Thi·∫øt l·∫≠p -> Nh·∫≠p h√†ng -> B√°n h√†ng -> Tr·∫£ h√†ng -> C√¥ng n·ª£ -> B√°o c√°o Cu·ªëi ng√†y & Xu·∫•t-Nh·∫≠p-T·ªìn."]
            }
        ];

        let currentMode = 1; let spinCount = 0; let isSpinning = false; let poolS1 = [...BUOI1_MASTER];
        const sndTick = document.getElementById('soundTick'); const sndWin = document.getElementById('soundWin');
        const funnyTexts = ["CHI·∫æN BINH MAY M·∫ÆN L√Ä...", "CH·ª¶ NH√ÇN TH·ª¨ TH√ÅCH L√Ä...", "G·ªåI T√äN ƒê·ªêI TH·ª¶...", "AI S·∫º L√Ä MASTER TI·∫æP THEO?", "SINH RA ƒê·ªÇ CHI·∫æN..."];

        function getNames() { return document.getElementById('nameList').value.split('\n').filter(n => n.trim() !== ""); }
        function updateCount() { document.getElementById('countDisplay').innerText = `${getNames().length} ƒê·ªêI TH·ª¶ ƒêANG CH·ªú`; }
        document.getElementById('nameList').addEventListener('input', updateCount);

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('btnMode1').classList.toggle('active', mode === 1);
            document.getElementById('btnMode2').classList.toggle('active', mode === 2);
            resetGame(false);
        }

        function resetGame(clearNames = true) {
            spinCount = 0; poolS1 = [...BUOI1_MASTER];
            document.getElementById('winnerName').innerText = "---";
            document.getElementById('luckyLabel').classList.remove('show');
            document.getElementById('turnLabel').innerText = "L∆Ø·ª¢T TH·ª®: 0";
            document.getElementById('scenarioBox').innerHTML = '<div style="text-align: center; opacity: 0.3; margin-top: 100px;">ƒêang ƒë·ª£i ch·ªß nh√¢n m·ªõi...</div>';
            document.getElementById('historyList').innerHTML = "";
            if(clearNames) document.getElementById('nameList').value = "";
            updateCount();
        }

        function startSpin() {
            const names = getNames();
            if (names.length === 0) return alert("H·∫øt chi·∫øn binh r·ªìi!");
            if (isSpinning) return;
            isSpinning = true; document.getElementById('spinBtn').disabled = true;
            document.getElementById('luckyLabel').innerText = funnyTexts[Math.floor(Math.random()*funnyTexts.length)];
            document.getElementById('luckyLabel').classList.add('show');
            
            let start = Date.now();
            const timer = setInterval(() => {
                document.getElementById('winnerName').innerText = names[Math.floor(Math.random() * names.length)];
                sndTick.currentTime = 0; sndTick.play().catch(()=>{});
                if (Date.now() - start > 1500) { clearInterval(timer); finishSpin(names); }
            }, 80);
        }

        function finishSpin(names) {
            const winIdx = Math.floor(Math.random() * names.length);
            const winner = names[winIdx];
            document.getElementById('winnerName').innerText = winner;
            spinCount++; document.getElementById('turnLabel').innerText = `L∆Ø·ª¢T TH·ª®: ${spinCount}`;
            sndWin.play().catch(()=>{}); confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

            let task;
            if (currentMode === 1) {
                if (poolS1.length === 0) poolS1 = [...BUOI1_MASTER];
                const taskIdx = Math.floor(Math.random() * poolS1.length);
                task = poolS1[taskIdx]; poolS1.splice(taskIdx, 1);
            } else {
                task = BUOI2_MASTER[spinCount - 1] || BUOI2_MASTER[BUOI2_MASTER.length-1];
            }

            let stepsHtml = task.steps.map(s => `<div class="sc-step"><b>üîπ</b> ${s}</div>`).join("");
            document.getElementById('scenarioBox').innerHTML = `
                <span class="tag">üöÄ ${task.tag}</span>
                <div class="sc-title">${task.title}</div>
                <div class="sc-context">üìç ${task.context}</div>
                ${stepsHtml}
            `;

            const updated = names.filter((_, i) => i !== winIdx);
            document.getElementById('nameList').value = updated.join('\n');
            updateCount();

            const h = document.createElement('div');
            h.className = 'history-item';
            h.innerHTML = `<span>‚öîÔ∏è ${spinCount}. ${winner}</span><span>${task.tag}</span>`;
            document.getElementById('historyList').prepend(h);

            isSpinning = false; document.getElementById('spinBtn').disabled = false;
        }
    </script>
</body>
</html>
