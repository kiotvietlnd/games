<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE CHOSEN ONE - FULL DETAIL SCRIPT</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #00A9E0; --secondary: #005595; --accent: #00FFCC; --bg: #030712;
            --panel: rgba(255, 255, 255, 0.05); --border: rgba(0, 169, 224, 0.3);
            --danger: #ff4d4d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif; background: var(--bg);
            background-image: radial-gradient(circle at 50% -20%, rgba(0, 169, 224, 0.2) 0%, transparent 50%);
            color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }
        header {
            padding: 15px 40px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0, 0, 0, 0.8); border-bottom: 2px solid var(--secondary);
        }
        .logo-text { font-size: 28px; font-weight: 900; letter-spacing: 5px; text-shadow: 0 0 15px var(--primary); text-transform: uppercase; }
        .mode-selector { display: flex; background: rgba(255, 255, 255, 0.05); padding: 5px; border-radius: 12px; border: 1px solid var(--border); }
        .mode-btn {
            border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;
            font-weight: 800; font-size: 11px; color: #666; background: transparent; transition: 0.3s;
        }
        .mode-btn.active { background: var(--primary); color: white; box-shadow: 0 0 20px rgba(0, 169, 224, 0.5); }
        .main-grid { display: grid; grid-template-columns: 320px 1fr 550px; gap: 20px; padding: 20px; flex: 1; }
        .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 20px; backdrop-filter: blur(15px); padding: 20px; display: flex; flex-direction: column; }
        textarea { flex: 1; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border); border-radius: 12px; color: #00FFCC; padding: 15px; font-size: 14px; resize: none; outline: none; }
        .game-zone { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .winner-name { font-size: 54px; font-weight: 900; text-shadow: 0 0 30px var(--primary); text-align: center; min-height: 70px; margin-bottom: 20px; color: #fff; }
        .spin-btn {
            width: 170px; height: 170px; border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border: 8px solid rgba(255,255,255,0.1); color: white; font-size: 20px; font-weight: 900;
            cursor: pointer; box-shadow: 0 0 40px rgba(0, 85, 149, 0.6); transition: 0.3s;
        }
        .spin-btn:disabled { opacity: 0.5; }
        .absent-btn {
            margin-top: 15px; background: rgba(255, 77, 77, 0.1); border: 1px solid var(--danger);
            color: var(--danger); padding: 8px 15px; border-radius: 8px; font-size: 11px;
            font-weight: 700; cursor: pointer; display: none; transition: 0.3s;
        }
        .scenario-box { background: rgba(0, 0, 0, 0.4); border: 1px solid var(--border); padding: 20px; border-radius: 18px; flex: 1; overflow-y: auto; font-size: 14px; line-height: 1.6; }
        .tag { background: rgba(0, 255, 204, 0.1); color: var(--accent); border: 1px solid var(--accent); padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: 800; margin-bottom: 10px; display: inline-block; }
        .sc-title { font-size: 18px; font-weight: 800; color: #fff; margin-bottom: 8px; }
        .sc-context { color: #FFA500; font-weight: bold; margin-bottom: 15px; font-size: 13px; background: rgba(255, 165, 0, 0.1); padding: 10px; border-radius: 8px; border-left: 4px solid; }
        .sc-step { margin-bottom: 10px; color: #d1d1d6; font-size: 13px; }
        .sc-step b { color: var(--accent); }
        .history-item { font-size: 11px; color: #52525b; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; }
        .panel-header { font-size: 13px; font-weight: 900; color: var(--accent); margin-bottom: 15px; display: flex; align-items: center; gap: 8px; text-transform: uppercase; letter-spacing: 1px; }
    </style>
</head>
<body>

    <header>
        <div class="logo-text">THE CHOSEN ONE</div>
        <div class="mode-selector">
            <button class="mode-btn active" id="btnMode1" onclick="setMode(1)">BU·ªîI 1: LU·ªíNG MASTER</button>
            <button class="mode-btn" id="btnMode2" onclick="setMode(2)">BU·ªîI 2: CHUY√äN S√ÇU</button>
        </div>
    </header>

    <div class="main-grid">
        <div class="panel">
            <h2 class="panel-header">‚ö° DANH S√ÅCH CHI·∫æN BINH</h2>
            <textarea id="nameList" placeholder="D√°n danh s√°ch h·ªçc vi√™n..."></textarea>
            <div id="countDisplay" style="text-align: center; font-size: 11px; margin-top: 10px; color: var(--secondary); font-weight: 800;">0 NG∆Ø·ªúI</div>
        </div>

        <div class="game-zone">
            <div id="winnerName" class="winner-name">---</div>
            <button class="spin-btn" id="spinBtn" onclick="handleSpinClick()">TRI·ªÜU H·ªíI</button>
            <button class="absent-btn" id="absentBtn" onclick="handleAbsent()">V·∫ÆNG M·∫∂T - GI·ªÆ K·ªäCH B·∫¢N</button>
            <div id="turnLabel" style="margin-top: 20px; font-weight: bold; color: var(--secondary); letter-spacing: 1px;">L∆Ø·ª¢T: 0</div>
        </div>

        <div class="panel">
            <h2 class="panel-header">üî• T√åNH HU·ªêNG TH·ª∞C CHI·∫æN</h2>
            <div class="scenario-box" id="scenarioBox">
                <div style="text-align: center; opacity: 0.3; margin-top: 100px;">ƒêang ch·ªù ch·ªçn chi·∫øn binh...</div>
            </div>
            <div id="historyList" style="margin-top: 15px; max-height: 120px; overflow-y: auto;"></div>
            <button onclick="resetGame()" style="margin-top: 5px; background: none; border: 1px solid #333; color: #444; padding: 4px; font-size: 9px; cursor: pointer; border-radius: 4px;">B·∫ÆT ƒê·∫¶U L·∫†I</button>
        </div>
    </div>

    <audio id="soundTick"><source src="https://www.soundjay.com/buttons/sounds/button-28.mp3" type="audio/mpeg"></audio>
    <audio id="soundWin"><source src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3" type="audio/mpeg"></audio>

    <script>
        const BUOI1_DATA = [
            {
                tag: "T√åNH HU·ªêNG 01", title: "Th·ªùi trang Nem Luxury",
                context: "Ch·ªß shop l√† Ch·ªã Lan. Ch·ªã ƒëang ƒëau ƒë·∫ßu v√¨ kh√¥ng nh·ªõ n·ªïi Size/M√†u c·ªßa v√°y l·ª•a trong kho.",
                steps: [
                    "<b>1. Th√™m h√†ng:</b> √Åo S∆° Mi (Size: S, M; M√†u: Tr·∫Øng, ƒêen).",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 100 c√°i t·ª´ NCC ƒê·∫ßu V√†o. Gi√° v·ªën 200k, b√°n 450k. N·ª£ NCC 2 tri·ªáu.",
                    "<b>3. B√°n h√†ng:</b> B√°n cho kh√°ch Mua H√†ng 2 c√°i. Thanh to√°n: 500k ti·ªÅn m·∫∑t, c√≤n l·∫°i chuy·ªÉn kho·∫£n.",
                    "<b>4. Tr·∫£ h√†ng:</b> Kh√°ch Mua H√†ng mang H√≥a ƒë∆°n g·ªëc tr·∫£ l·∫°i 1 c√°i size S do m·∫∑c ch·∫≠t.",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°i MH Qu·∫£n l√Ω, t·∫°o phi·∫øu chi tr·∫£ n·ª£ 2 tri·ªáu cho NCC ƒê·∫ßu V√†o.",
                    "<b>6. B√°o c√°o:</b> Xem BC Doanh thu theo m·∫∑t h√†ng ƒë·ªÉ ki·ªÉm tra s·ªë l∆∞·ª£ng √Åo ƒë√£ b√°n th·ª±c t·∫ø."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 02", title: "T·∫°p h√≥a An B√¨nh",
                context: "Ch·ªß shop l√† Anh B√¨nh. Anh c·∫ßn qu·∫£n l√Ω Bia theo lon v√† th√πng ƒë·ªÉ tr√°nh nh√¢n vi√™n b√°n l·∫ª l√†m l·ªách kho.",
                steps: [
                    "<b>1. Th√™m h√†ng:</b> Bia Heineken. ƒêVT: Lon. ƒêVT quy ƒë·ªïi: Th√πng (24 lon).",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 20 th√πng t·ª´ NCC ƒê·∫ßu V√†o. Gi√° v·ªën 380k/th√πng. N·ª£ full h√≥a ƒë∆°n.",
                    "<b>3. B√°n h√†ng:</b> B√°n s·ªâ 2 th√πng cho kh√°ch Mua H√†ng. Cho kh√°ch n·ª£ l·∫°i to√†n b·ªô.",
                    "<b>4. Tr·∫£ h√†ng:</b> Kh√°ch Mua H√†ng mang H√≥a ƒë∆°n g·ªëc tr·∫£ l·∫°i 5 lon do m√≥p m√©o.",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°i MH Qu·∫£n l√Ω, t·∫°o phi·∫øu thu n·ª£ t·ª´ kh√°ch Mua H√†ng cho ƒë∆°n s·ªâ tr√™n.",
                    "<b>6. B√°o c√°o:</b> Xem BC H√†ng h√≥a ƒë·ªÉ th·∫•y t·ªìn kho quy ƒë·ªïi ch√≠nh x√°c (c√≤n bao nhi√™u Th√πng/Lon)."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 03", title: "M·ªπ ph·∫©m Guardian",
                context: "Ch·ªß shop l√† B·∫°n Vy. Vy mu·ªën vi·ªác kh√°ch ƒë·ªïi tr·∫£ m√†u son li√™n t·ª•c kh√¥ng l√†m ch·ªã r·ªëi k√©t ti·ªÅn m·∫∑t.",
                steps: [
                    "<b>1. Th√™m h√†ng:</b> Son Kem 3CE (Thu·ªôc t√≠nh: ƒê·ªè Thu·∫ßn, Cam Ch√°y).",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p m·ªói m√†u 10 c√¢y t·ª´ NCC ƒê·∫ßu V√†o. Gi√° v·ªën 250k. Thanh to√°n ƒë·ªß.",
                    "<b>3. B√°n h√†ng:</b> B√°n l·∫ª 1 c√¢y ƒê·ªè Thu·∫ßn cho kh√°ch Mua H√†ng (Thu ti·ªÅn m·∫∑t).",
                    "<b>4. Tr·∫£ h√†ng:</b> Kh√°ch Mua H√†ng c·∫ßm H√≥a ƒë∆°n g·ªëc tr·∫£ h√†ng ngay ƒë·ªÉ l·∫•y l·∫°i ti·ªÅn m·∫∑t.",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°o phi·∫øu chi thanh to√°n n·ªët 1 kho·∫£n n·ª£ c≈© b·∫•t k·ª≥ cho NCC ƒê·∫ßu V√†o.",
                    "<b>6. B√°o c√°o:</b> Xem BC Cu·ªëi ng√†y ƒë·ªÉ ch·ªët t·ªïng ti·ªÅn m·∫∑t th·ª±c t·∫ø ƒë√£ thu/chi trong ca."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 04", title: "ƒêi·ªán m√°y Sunhouse",
                context: "Ch·ªß shop l√† Ch√∫ H√πng. Ch√∫ th∆∞·ªùng xuy√™n qu√™n ƒë√≤i n·ª£ th·∫ßu x√¢y d·ª±ng v√¨ ch·ªâ ghi v√†o s·ªï tay.",
                steps: [
                    "<b>1. Th√™m h√†ng:</b> N·ªìi c∆°m ƒëi·ªán.",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 10 c√°i t·ª´ NCC ƒê·∫ßu V√†o. Gi√° v·ªën 800k. Gi√° b√°n 1.200k.",
                    "<b>3. B√°n h√†ng:</b> B√°n cho kh√°ch Mua H√†ng 3 c√°i. Ghi n·ª£ 100% h√≥a ƒë∆°n.",
                    "<b>4. Tr·∫£ h√†ng:</b> Kh√°ch Mua H√†ng tr·∫£ l·∫°i 1 c√°i l·ªói v·ªè (y√™u c·∫ßu t√¨m ƒë√∫ng H√≥a ƒë∆°n g·ªëc).",
                    "<b>5. C√¥ng n·ª£:</b> Kh√°ch Mua H√†ng thanh to√°n tr∆∞·ªõc 1 tri·ªáu. T·∫°o phi·∫øu thu n·ª£ t·∫°i MH Qu·∫£n l√Ω.",
                    "<b>6. B√°o c√°o:</b> M·ªü BC T√†i ch√≠nh, ch·ªâ ra kho·∫£n 'Ph·∫£i thu kh√°ch h√†ng' c√≤n l·∫°i c·ªßa kh√°ch."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 05", title: "N√¥ng s·∫£n S·∫°ch Eco",
                context: "Ch·ªß shop l√† Ch·ªã Hoa. Ch·ªã mu·ªën bi·∫øt ch√≠nh x√°c l·ª£i nhu·∫≠n b√°n g·∫°o sau khi tr·ª´ h√†ng kh√°ch tr·∫£.",
                steps: [
                    "<b>1. Th√™m h√†ng:</b> G·∫°o ST25. ƒêVT: Kg. ƒêVT quy ƒë·ªïi: Bao (25kg).",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 40 bao t·ª´ NCC ƒê·∫ßu V√†o. Thanh to√°n ti·ªÅn m·∫∑t ƒë·ªß.",
                    "<b>3. B√°n h√†ng:</b> B√°n l·∫ª 10kg cho kh√°ch Mua H√†ng qua ƒëi·ªán tho·∫°i.",
                    "<b>4. Tr·∫£ h√†ng:</b> Kh√°ch Mua H√†ng tr·∫£ 2kg g·∫°o b·ªã ·∫©m k√®m theo H√≥a ƒë∆°n g·ªëc.",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°o phi·∫øu chi thanh to√°n n·ª£ cho m·ªôt NCC ƒê·∫ßu V√†o kh√°c trong danh s√°ch.",
                    "<b>6. B√°o c√°o:</b> Show m√†n h√¨nh T·ªïng quan ƒë·ªÉ xem l·ª£i nhu·∫≠n g·ªôp th·ª±c t·∫ø sau khi ƒë√£ tr·∫£ h√†ng."
                ]
            }
        ];

        const BUOI2_DATA = [
            {
                tag: "T√åNH HU·ªêNG 01", title: "Anh Minh (ƒê·ªì ch∆°i)",
                context: "C·∫ßn ph√¢n quy·ªÅn cho nh√¢n vi√™n m·ªõi, b√°n th√™m d·ªãch v·ª• g√≥i qu√†, thi·∫øt l·∫≠p gi√° s·ªâ v√† nh·∫≠p nhanh h√†ng m·ªõi v·ªÅ.",
                steps: [
                    "<b>1. Ph√¢n quy·ªÅn:</b> T·∫°o t√†i kho·∫£n t√™n V√¢n, kh√¥ng ph√¢n quy·ªÅn xem b√°o c√°o.",
                    "<b>2. H√†ng h√≥a D·ªãch v·ª•:</b> H√†ng d·ªãch v·ª• 'G√≥i qu√†' gi√° 30k.",
                    "<b>3. B·∫£ng gi√°:</b> Thi·∫øt l·∫≠p b·∫£ng gi√° 'Kh√°ch s·ªâ' (gi·∫£m 10% so v·ªõi gi√° chung).",
                    "<b>4. Nh·∫≠p h√†ng:</b> Th√™m m·ªõi h√†ng h√≥a 'Pin AA' trong phi·∫øu nh·∫≠p h√†ng."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 02", title: "Anh Nam (Ph·ª• t√πng)",
                context: "G·∫∑p kh√≥ khƒÉn khi gi√° nh·∫≠p bi·∫øn ƒë·ªông li√™n t·ª•c v√† c·∫ßn tra c·ª©u nhanh s·∫£n ph·∫©m theo nh√≥m h√†ng.",
                steps: [
                    "<b>1. Kh·ªüi t·∫°o:</b> Th√™m h√†ng 'L·ªëp xe Honda', nh√≥m Ph·ª• t√πng, gi√° v·ªën 300k, b√°n 500k.",
                    "<b>2. Nh·∫≠p h√†ng:</b> T·∫°o 1 phi·∫øu nh·∫≠p c√≥ 2 ƒë·ª£t gi√° (300k v√† 350k).",
                    "<b>3. Thay ƒë·ªïi gi√°:</b> S·ª≠a gi√° b√°n l·ªëp xe Honda th√†nh 550k ngay khi t·∫°o 1 phi·∫øu nh·∫≠p m·ªõi.",
                    "<b>4. H∆∞·ªõng d·∫´n:</b> Xem l·∫°i c√°ch t√≠nh gi√° v·ªën c·ªßa h√†ng h√≥a tr√™n h·ªá th·ªëng cho m·∫∑t h√†ng ƒëang c√≥ nhi·ªÅu m·ª©c gi√° kh√°c nhau.",
                    "<b>5. Tra c·ª©u:</b> Tra c·ª©u s·∫£n ph·∫©m theo ƒë√∫ng nh√≥m 'Ph·ª• t√πng' tr√™n m√†n h√¨nh b√°n h√†ng."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 03", title: "Ch·ªã Ng·ªçc (Pet Shop)",
                context: "Mu·ªën ƒë·∫©y nhanh t·ªëc ƒë·ªô b√°n h√†ng, thu n·ª£ nhanh t·∫°i qu·∫ßy v√† x·ª≠ l√Ω tr·∫£ h√†ng linh ho·∫°t khi m·∫•t h√≥a ƒë∆°n.",
                steps: [
                    "<b>1. Th√™m nhanh:</b> Th√™m m·ªõi h√†ng h√≥a 'C√°t v·ªá sinh' ngay t·∫°i m√†n h√¨nh b√°n h√†ng.",
                    "<b>2. Ghi n·ª£:</b> B√°n h√†ng cho anh Trung v·ªõi s·ªë l∆∞·ª£ng l√† 5 bao C√°t v·ªá sinh, l∆∞u n·ª£ 50% ƒë∆°n h√†ng.",
                    "<b>3. Thu n·ª£:</b> Th·ª±c hi·ªán thao t√°c anh Trung ƒë·∫øn tr·∫£ n·ª£ n·ªët s·ªë ti·ªÅn c√≤n thi·∫øu.",
                    "<b>4. Tr·∫£ h√†ng:</b> X·ª≠ l√Ω tr·∫£ h√†ng nhanh 1 bao C√°t cho kh√°ch l·∫ª m√† kh√¥ng c·∫ßn h√≥a ƒë∆°n g·ªëc.",
                    "<b>5. C√†i ƒë·∫∑t:</b> Thi·∫øt l·∫≠p th·ªùi gian cho ph√©p tr·∫£ h√†ng t·ªëi ƒëa l√† 7 ng√†y."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 04", title: "Ch·ªã H√† (N·ªôi th·∫•t)",
                context: "C·∫ßn qu·∫£n l√Ω nh√≥m kh√°ch Th√¢n Thi·∫øt t·ª± ƒë·ªông, ki·ªÉm so√°t kho h√†ng theo nh√≥m v√† theo d√µi chi ph√≠ v·∫≠n h√†nh.",
                steps: [
                    "<b>1. Nh√≥m KH:</b> T·∫°o nh√≥m 'Th√¢n thi·∫øt' ƒë∆∞·ª£c gi·∫£m 10% v·ªõi ƒëi·ªÅu ki·ªán doanh thu t·ª´ 5 tri·ªáu tr·ªü l√™n. N·∫øu kh√°ch tr·∫£ h√†ng l√†m doanh thu kh√¥ng c√≤n ƒë·ªß ƒëi·ªÅu ki·ªán, kh√°ch s·∫Ω b·ªã lo·∫°i kh·ªèi nh√≥m. Show k·∫øt qu·∫£ cho ch·ªã H√† xem khi kh√°ch h√†ng kh√¥ng c√≤n ƒë·ªß ƒëi·ªÅu ki·ªán.",
                    "<b>2. Ki·ªÉm kho:</b> T·∫°o phi·∫øu Ki·ªÉm kho m·∫∑t h√†ng 'ƒê√®n ng·ªß'.",
                    "<b>3. S·ªï qu·ªπ:</b> T·∫°o phi·∫øu chi ti·ªÅn ƒëi·ªán 500K.",
                    "<b>4. T√†i kho·∫£n:</b> Th√™m s·ªë t√†i kho·∫£n ng√¢n h√†ng Vietcombank."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 05", title: "Anh B·∫Øc (G·∫°ch Men)",
                context: "Kh√°ch c√¥ng tr√¨nh mua th·ª´a g·∫°ch v√† mu·ªën tr·∫£ l·∫°i ƒë·ªÉ ƒë·ªïi sang lo·∫°i g·∫°ch cao c·∫•p h∆°n.",
                steps: [
                    "<b>1. Khai b√°o:</b> G·∫°ch Men Prime (V·ªën 150k, B√°n 250k). G·∫°ch Granite (V·ªën 250k, B√°n 350k). ƒêVT m2.",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 200 m·ªói lo·∫°i t·ª´ NCC ƒê·∫ßu V√†o. N·ª£ NCC 10 tri·ªáu.",
                    "<b>3. B√°n h√†ng:</b> Kh√°ch Mua G·∫°ch Men Prime 50 m2. Kh√°ch thanh to√°n tr∆∞·ªõc m·ªôt n·ª≠a.",
                    "<b>4. Tr·∫£ & ƒê·ªïi h√†ng:</b> Kh√°ch tr·∫£ 10 m2 th·ª´a (kh√¥ng h√≥a ƒë∆°n g·ªëc) v√† ƒë·ªïi sang 'G·∫°ch Granite' ngay tr√™n phi·∫øu tr·∫£.",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°o phi·∫øu chi thanh to√°n n·ªët n·ª£ cho NCC ƒê·∫ßu V√†o.",
                    "<b>6. B√°o c√°o:</b> Xem b√°o c√°o Doanh thu ƒë·ªÉ th·∫•y gi√° tr·ªã ƒë∆°n h√†ng sau khi b√π tr·ª´ ƒë·ªïi tr·∫£."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 06", title: "Ch·ªã My (Qu√† t·∫∑ng)",
                context: "Kh√°ch gh√© mua th√™m qu√† v√† mu·ªën thanh to√°n d·ª©t ƒëi·ªÉm kho·∫£n n·ª£ c≈© c√≤n thi·∫øu t·ª´ th√°ng tr∆∞·ªõc.",
                steps: [
                    "<b>1. H√†ng h√≥a:</b> 'L·ªìng ƒë√®n g·ªó', gi√° v·ªën 50k, gi√° b√°n 120k.",
                    "<b>2. Nh·∫≠p h√†ng:</b> Nh·∫≠p 100 c√°i t·ª´ NCC ƒê·∫ßu V√†o. Thanh to√°n tr∆∞·ªõc 2 tri·ªáu.",
                    "<b>3. B√°n h√†ng:</b> L√™n ƒë∆°n b√°n 2 c√°i cho ch·ªã Xu√¢n. Ch·ªã Xu√¢n n·ª£ l·∫°i 50%.",
                    "<b>4. Tr·∫£ h√†ng:</b> Ch·ªã Xu√¢n mang tr·∫£ 1 c√°i l·ªìng ƒë√®n b·ªã l·ªói (c√≥ h√≥a ƒë∆°n g·ªëc).",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°o phi·∫øu chi c√¥ng n·ª£ ƒë·ªÉ thanh to√°n ph·∫ßn ti·ªÅn c√≤n l·∫°i cho NCC ƒê·∫ßu V√†o.",
                    "<b>6. B√°o c√°o:</b> Xem b√°o c√°o Cu·ªëi ng√†y ƒë·ªÉ th·∫•y t·ªïng ti·ªÅn m·∫∑t thu ƒë∆∞·ª£c bao g·ªìm c·∫£ ti·ªÅn h√†ng v√† ti·ªÅn n·ª£."
                ]
            },
            {
                tag: "T√åNH HU·ªêNG 07", title: "Anh Long (Si√™u th·ªã)",
                context: "H√†ng m·ªõi v·ªÅ kh√°ch ƒë√£ ƒë√≤i mua ngay, nh√¢n vi√™n ph·∫£i v·ª´a b√°n v·ª´a c·∫≠p nh·∫≠t h√†ng m·ªõi v√†o h·ªá th·ªëng.",
                steps: [
                    "<b>1. Th√™m h√†ng nhanh:</b> Th√™m m·ªõi h√†ng h√≥a 'B√°nh Quy' tr·ª±c ti·∫øp khi ƒëang b√°n h√†ng cho kh√°ch.",
                    "<b>2. Nh·∫≠p h√†ng:</b> Quay l·∫°i MH Qu·∫£n l√Ω t·∫°o phi·∫øu Nh·∫≠p h√†ng cho B√°nh Quy (SL 50, n·ª£ NCC B√°nh K·∫πo Nh·∫≠p Kh·∫©u).",
                    "<b>3. B√°n h√†ng:</b> B√°n cho ch·ªã Ng·ªçc 10 t√∫i B√°nh Quy (Thanh to√°n: Ti·ªÅn m·∫∑t + v√≠ ƒëi·ªán t·ª≠).",
                    "<b>4. Tr·∫£ h√†ng:</b> Ch·ªã Ng·ªçc quay l·∫°i tr·∫£ h√†ng nhanh 2 s·∫£n ph·∫©m do ƒë·ªïi √Ω.",
                    "<b>5. C√¥ng n·ª£:</b> T·∫°o phi·∫øu chi n·ª£ ph√°t sinh v·ªõi NCC B√°nh K·∫πo Nh·∫≠p Kh·∫©u.",
                    "<b>6. B√°o c√°o:</b> Xem b√°o t·ªïng quan doanh thu v√† b√°o c√°o xu·∫•t nh·∫≠p t·ªìn chi ti·∫øt c·ªßa B√°nh Quy."
                ]
            }
        ];

        let currentMode = 1;
        let spinCount = 0;
        let isSpinning = false;
        let pool = [];
        let currentTask = null;
        let lastWinner = "";
        let keepTask = false;

        const sndTick = document.getElementById('soundTick');
        const sndWin = document.getElementById('soundWin');

        function refreshPool() {
            // Bu·ªïi 1 x√°o tr·ªôn, Bu·ªïi 2 ƒëi theo tr√¨nh t·ª± 01-07
            if (currentMode === 1) {
                pool = [...BUOI1_DATA].sort(() => Math.random() - 0.5);
            } else {
                pool = [...BUOI2_DATA];
            }
        }
        refreshPool();

        function getNames() { return document.getElementById('nameList').value.split('\n').filter(n => n.trim() !== ""); }
        function updateCount() { document.getElementById('countDisplay').innerText = `${getNames().length} NG∆Ø·ªúI`; }
        document.getElementById('nameList').addEventListener('input', updateCount);

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('btnMode1').classList.toggle('active', mode === 1);
            document.getElementById('btnMode2').classList.toggle('active', mode === 2);
            resetGame(false);
        }

        function resetGame(clearNames = true) {
            spinCount = 0; refreshPool(); currentTask = null; keepTask = false;
            document.getElementById('winnerName').innerText = "---";
            document.getElementById('absentBtn').style.display = "none";
            document.getElementById('turnLabel').innerText = "L∆Ø·ª¢T: 0";
            document.getElementById('scenarioBox').innerHTML = '<div style="text-align: center; opacity: 0.3; margin-top: 100px;">ƒêang ch·ªù ch·ªçn chi·∫øn binh...</div>';
            document.getElementById('historyList').innerHTML = "";
            if(clearNames) document.getElementById('nameList').value = "";
            updateCount();
        }

        function handleAbsent() {
            if (!lastWinner) return;
            const h = document.createElement('div');
            h.className = 'history-item'; h.style.color = 'var(--danger)';
            h.innerHTML = `<span>‚ùå ${lastWinner} (V·∫Øng)</span><span>Gi·ªØ k·ªãch b·∫£n</span>`;
            document.getElementById('historyList').prepend(h);
            document.getElementById('winnerName').innerText = "---";
            document.getElementById('absentBtn').style.display = "none";
            keepTask = true; spinCount--;
            document.getElementById('turnLabel').innerText = `L∆Ø·ª¢T: ${spinCount}`;
        }

        function handleSpinClick() {
            if (isSpinning) return;
            if (!keepTask) currentTask = null;
            startSpin();
        }

        function startSpin() {
            const names = getNames();
            if (names.length === 0) return alert("Vui l√≤ng nh·∫≠p danh s√°ch!");
            isSpinning = true; document.getElementById('spinBtn').disabled = true;
            document.getElementById('absentBtn').style.display = "none";
            let start = Date.now();
            const timer = setInterval(() => {
                document.getElementById('winnerName').innerText = names[Math.floor(Math.random() * names.length)];
                if(sndTick) { sndTick.currentTime = 0; sndTick.play().catch(()=>{}); }
                if (Date.now() - start > 1500) { clearInterval(timer); finishSpin(names); }
            }, 80);
        }

        function finishSpin(names) {
            const winIdx = Math.floor(Math.random() * names.length);
            lastWinner = names[winIdx];
            document.getElementById('winnerName').innerText = lastWinner;
            
            if (!currentTask) {
                if (pool.length === 0) {
                    alert("ƒê√£ h·∫øt k·ªãch b·∫£n. H·ªá th·ªëng t·ª± ƒë·ªông l√†m m·ªõi!");
                    refreshPool();
                }
                // D√πng shift cho Bu·ªïi 2 ƒë·ªÉ ƒë√∫ng tr√¨nh t·ª±, d√πng pop cho Bu·ªïi 1 (ƒë√£ x√°o tr·ªôn)
                currentTask = currentMode === 2 ? pool.shift() : pool.pop();
            }

            spinCount++;
            document.getElementById('turnLabel').innerText = `L∆Ø·ª¢T: ${spinCount}`;
            if(sndWin) sndWin.play().catch(()=>{}); 
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

            document.getElementById('scenarioBox').innerHTML = `
                <span class="tag">üöÄ ${currentTask.tag}</span>
                <div class="sc-title">${currentTask.title}</div>
                <div class="sc-context">üìç Ng·ªØ c·∫£nh: ${currentTask.context}</div>
                ${currentTask.steps.map(s => `<div class="sc-step"> ${s}</div>`).join("")}
            `;

            const updated = names.filter((_, i) => i !== winIdx);
            document.getElementById('nameList').value = updated.join('\n');
            updateCount();

            const h = document.createElement('div');
            h.className = 'history-item';
            h.innerHTML = `<span>‚öîÔ∏è ${spinCount}. ${lastWinner}</span><span>${currentTask.tag}</span>`;
            document.getElementById('historyList').prepend(h);

            isSpinning = false; keepTask = false;
            document.getElementById('spinBtn').disabled = false;
            document.getElementById('absentBtn').style.display = "block";
        }
    </script>
</body>
</html>
